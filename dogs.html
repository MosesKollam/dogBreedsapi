<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Card UI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            display: flex;
            height: 100vh;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background: linear-gradient(135deg, #f7d794, #f19066);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-image: url(back.png);
        }

        .search-bar {
            display: flex;
            width: 300px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .search-bar input {
            flex: 1;
            padding: 10px 12px;
            border: none;
            outline: none;
            font-size: 1rem;
        }

        .search-bar input::placeholder {
            color: #aaa;
        }

        .search-bar button {
            padding: 0 20px;
            border: none;
            background-color: #ff7f50;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-bar button:hover {
            background-color: #ff4500;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .card {
            width: 18rem;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.5);
        }

        .card-img-top {
            width: 100%;
            height: 200px;
            object-fit: contain;
            background-color: #ddd;
        }

        .card-body {
            padding: 15px;
            text-align: center;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .card-text {
            font-size: 0.95rem;
            color: #555;
        }

        .suggestion-box {
            position: absolute;
            top: 285px;
            width: 300px;
            background-color: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            z-index: 1000;
            max-height: 250px;
            overflow-y: auto;
            font-family: inherit;
            transform: translateY(-50px);
        }

        .suggestion-item {
            padding: 10px 14px;
            cursor: pointer;
            transition: background 0.2s ease;
            font-size: 0.95rem;
            color: #333;
            border-bottom: 1px solid #eee;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover {
            background: #ffecd2;
            /* highlight on hover */
            color: #000;
        }

        /* Scrollbar styling for modern look */
        .suggestion-box::-webkit-scrollbar {
            width: 6px;
        }

        .suggestion-box::-webkit-scrollbar-thumb {
            background: #ff7f50;
            border-radius: 3px;
        }

        .suggestion-box::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        /* --- Mobile Responsive --- */
        @media (max-width: 600px) {
            body {
                background-image: url(back.png);
                background-size: 400px 300px;
                background-repeat: repeat;
            }

            .search-bar {
                width: 90%;
                display: flex;
                flex-direction: row;
                position: relative;
            }

            .search-bar input {
                width: 65%;
                border-radius: 8px 0 0 8px;
            }

            .search-bar button {
                width: 35%;
                border-radius: 0 8px 8px 0;
                height: 100%;
                position: relative;
                margin-top: 0;
            }

            .card {
                width: 90%;
            }

            .card-img-top {
                height: 180px;
            }

            .suggestion-box {
                width: 90%;
                top: 230px;
                max-height: 200px;
                transform: translateY(-50px);
            }
        }
    </style>
</head>

<body>
    <div class="logo">

    </div>

    <div class="search-bar">
        <input type="text" placeholder="Enter breed" class="inputText">
        <button type="submit" class="search-button">Search</button>
    </div>
    <div class="suggestion-box" id="suggestion-box"></div>

    <div class="card">
        <img src="background.jpg" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title">Card Title</h5>
            <p class="card-text">Discover different dog breeds with random images â€” powered by the Dog API.</p>
            <a href="#" class="btn btn-primary random">More Images</a>
        </div>
    </div>

    <script>
        const search_input = document.querySelector(".inputText");
        const search_button = document.querySelector(".search-button");
        const suggestion_box = document.querySelector(".suggestion-box");

        let allDogs = [];
        async function getNames() {
            try {
                const response = await fetch('https://dog.ceo/api/breeds/list/all');
                if (!response.ok) throw new Error('Not Found');
                const data = await response.json();
                console.log(typeof (data));
                const breednames = Object.keys(data.message);
                breednames.forEach(function (element) {
                    const subBreeds = data.message[element];
                    if (subBreeds.length === 0) {
                        allDogs.push(capitalizeWords(element));
                    } else {
                        subBreeds.forEach(function (ele) {
                            allDogs.push(`${capitalizeWords(element)} ${capitalizeWords(ele)}`);
                        })
                    }
                    console.log(allDogs);
                })
            } catch (Error) {
                console.error('Error:', Error);
            }
        }
        getNames();

        function capitalizeWords(str) {
            return str.split(' ').map(function (word) {
                return word.charAt(0).toUpperCase() + word.slice(1);
            }).join(' ');
        }

        search_input.addEventListener("input", function () {
            const value = search_input.value.toLowerCase();
            console.log(value);

            suggestion_box.innerHTML = "";
            if (!value) return;

            const filtered = allDogs.filter(function (name) {
                return (name.toLowerCase().includes(value))
            }).slice(0, 10);
            console.log(filtered);

            filtered.forEach(function (name) {
                const item = document.createElement("div");
                item.classList.add("suggestion-item");
                item.textContent = name;
                item.addEventListener('click', function () {
                    search_input.value = name;
                    suggestion_box.innerHTML = "";
                    fetchDog(name);
                });
                suggestion_box.appendChild(item);
            })
        });
        async function fetchDog(name) {
            try {
                // Keep name as is for display
                const displayName = name;

                // Format for URL: replace space with '/'
                const urlName = name.toLowerCase().replace(' ', '/');

                const url = `https://dog.ceo/api/breed/${urlName}/images/random`;
                console.log("Fetching URL:", url);

                const response = await fetch(url);
                if (!response.ok) throw new Error("Not Found");

                const data = await response.json();
                console.log("Random Image URL:", data.message);

                // Update card
                document.querySelector(".card-img-top").src = data.message;
                document.querySelector(".card-title").textContent = displayName;

                const random_btn = document.querySelector('.random');
                random_btn.addEventListener('click', async function () {
                    try {
                        const urlName2 = name.toLowerCase().replace(' ', '/');
                        const url2 = `https://dog.ceo/api/breed/${urlName2}/images/random`;
                        const response_image = await fetch(url2);
                        if (!response_image.ok) throw new Error("no found");
                        const data2 = await response_image.json();
                        document.querySelector(".card-img-top").src = data2.message;
                    } catch (err) {
                        console.log(error);
                    }
                })

            } catch (error) {
                console.error(error);
            }
        }
    </script>
</body>

</html>